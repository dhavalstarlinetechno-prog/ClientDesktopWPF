<UserControl x:Class="ClientDesktop.View.Details.MessageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:ClientDesktop.ViewModel;assembly=ClientDesktop.ViewModel">

    <UserControl.DataContext>
        <vm:MessageViewModel />
    </UserControl.DataContext>

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#FFF" Padding="5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock Text="Start Date: " VerticalAlignment="Center" Margin="0,0,5,0" FontSize="13"/>
                <DatePicker SelectedDate="{Binding StartDate}" Style="{StaticResource CustomDatePickerStyle}" Width="120" Margin="0,0,10,0"/>

                <TextBlock Text="End Date: " VerticalAlignment="Center" Margin="0,0,5,0" FontSize="13"/>
                <DatePicker SelectedDate="{Binding EndDate}" Style="{StaticResource CustomDatePickerStyle}" Width="120" Margin="0,0,10,0"/>

                <Button Content="Go" Command="{Binding FilterCommand}" 
                        Width="50" Background="#007ACC" Foreground="White"/>
            </StackPanel>
        </Border>

        <DataGrid Grid.Row="1" ItemsSource="{Binding Messages}" 
                  AutoGenerateColumns="False" GridLinesVisibility="All" 
                  HeadersVisibility="Column" BorderThickness="0"
                  Style="{StaticResource CustomDataGrid}">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="" Binding="{Binding IsSelected}" Width="30"/>
                <DataGridTextColumn Header="From" Binding="{Binding From}" Width="150"/>
                <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="200"/>
                <DataGridTextColumn Header="Message" Binding="{Binding Message}" Width="*"/>
                <DataGridTextColumn Header="Date &amp; Time" Binding="{Binding Date, StringFormat='{}{0:dd-MM-yyyy HH:mm}'}" Width="150"/>
            </DataGrid.Columns>
        </DataGrid>

        <TextBlock Grid.Row="1" Text="No data available" 
                   HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,50,0,0"
                   FontSize="16" Foreground="Gray">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Messages.Count}" Value="0">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
    </Grid>
</UserControl>